(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09d1c666"],{"61f3":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),r("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),r("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),r("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1))],1)},a=[],o={data:function(){return{attrs:{boilerplate:!0,elevation:0}}}},l=o,i=r("2877"),n=r("6544"),c=r.n(n),u=r("3129"),d=Object(i["a"])(l,s,a,!1,null,null,null);t["a"]=d.exports;c()(d,{VSkeletonLoader:u["a"]})},"7c48":function(e,t,r){"use strict";r("ba54")},ba54:function(e,t,r){},d350:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.isLoading?r("TweetsLoading"):[e._l(e.followers,(function(t){return r("FollowerCard",{key:t.followerId,attrs:{"initial-follow":t},on:{"after-build-followship":e.afterBuildFollowship}})})),e.message?r("v-card",{staticClass:"message-card mt-0",attrs:{elevation:"0","max-width":"600px"}},[r("v-card-title",[e._v(e._s(this.message))])],1):e._e()]],2)},a=[],o=r("5530"),l=r("1da1"),i=(r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mt-0",attrs:{elevation:"0",tile:"","max-width":"600px"}},[r("v-container",{staticClass:"d-flex justify-space-between"},[r("router-link",{staticClass:"links",attrs:{to:"/users/"+e.follow.followerId}},[r("v-avatar",{staticClass:"tweet-card-avatar",attrs:{size:"50"}},[r("img",{attrs:{src:e.follow.avatar,alt:e.follow.name}})])],1),r("v-card-text",{staticClass:"py-0"},[r("v-list-item-title",{staticClass:"followship-user-name mb-1"},[e._v(e._s(e.follow.name))]),r("v-list-item-subtitle",{staticClass:"followship-user-account"},[e._v("@"+e._s(e.follow.account))]),r("v-list-item-content",{staticClass:"followship-intro pb-0 pt-1"},[e._v(" "+e._s(e.follow.introduction)+" ")])],1),e.follow.isFollowed&&e.follow.followerId!==e.currentUser.id?r("v-btn",{staticClass:"text-no-wrap rounded-pill px-4",attrs:{elevation:"0",color:"primary",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unfollow(e.follow.followerId)}}},[e._v("正在跟隨")]):e._e(),e.follow.isFollowed||e.follow.followerId===e.currentUser.id?e._e():r("v-btn",{staticClass:"text-no-wrap rounded-pill px-4",attrs:{outlined:"",color:"primary",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollow(e.follow.followerId)}}},[e._v("跟隨")])],1),r("v-divider")],1)}),n=[],c=r("2f62"),u=r("8845"),d=r("2fa3"),f={name:"FollowerCard",props:{initialFollow:{type:Object,default:function(){}}},data:function(){return{follow:this.initialFollow,isProcessing:!1}},computed:Object(o["a"])({},Object(c["b"])(["currentUser","isAuthenticated"])),methods:{addFollow:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u["a"].follow({followingId:e});case 4:if(s=r.sent,a=s.data,"success"===a.status){r.next=8;break}throw new Error(a.message);case 8:d["a"].fire({icon:"success",title:"".concat(a.message)}),t.follow.isFollowed=!0,t.isProcessing=!1,t.$emit("after-build-followship"),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},unfollow:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,u["a"].unfollow({followingId:e});case 4:if(s=r.sent,a=s.data,"success"===a.status){r.next=8;break}throw new Error(a.message);case 8:t.follow.isFollowed=!1,t.isProcessing=!1,d["a"].fire({icon:"success",title:"".concat(a.message)}),t.isProcessing=!1,t.$emit("after-build-followship"),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法移除追蹤，請稍後再試"});case 19:case"end":return r.stop()}}),r,null,[[0,15]])})))()}}},w=f,v=r("2877"),p=r("6544"),m=r.n(p),h=r("8212"),b=r("8336"),g=r("b0af"),k=r("99d9"),x=r("a523"),_=r("ce7e"),C=r("5d23"),F=Object(v["a"])(w,i,n,!1,null,null,null),P=F.exports;m()(F,{VAvatar:h["a"],VBtn:b["a"],VCard:g["a"],VCardText:k["c"],VContainer:x["a"],VDivider:_["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"]});var j=r("4cce"),L=r("61f3"),V={name:"Follower",data:function(){return{followers:[],isProcessing:!1,message:"",isLoading:!1}},components:{FollowerCard:P,TweetsLoading:L["a"]},methods:{fetchUserFollowers:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,j["a"].users.getUserFollowers(e);case 4:if(s=r.sent,a=s.data,void 0===a.message){r.next=11;break}return t.message=a.message,t.followers=[],t.isLoading=!1,r.abrupt("return");case 11:t.followers=a,t.isLoading=!1,r.next=20;break;case 15:r.prev=15,r.t0=r["catch"](0),t.isLoading=!1,d["a"].fire({icon:"error",title:"無法取得使用者追隨者的名單，請稍後再試"}),console.log("error",r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,15]])})))()},afterBuildFollowship:function(){this.$store.dispatch("fetchTopUsers")}},created:function(){var e=this.$route.params.id;this.fetchUserFollowers(e)},computed:Object(o["a"])({},Object(c["b"])(["currentUser"])),beforeRouteUpdate:function(e,t,r){this.fetchUserFollowers(e.params.id),r()}},I=V,O=(r("7c48"),Object(v["a"])(I,s,a,!1,null,"cec4af02",null));t["default"]=O.exports;m()(O,{VCard:g["a"],VCardTitle:k["d"]})}}]);
//# sourceMappingURL=chunk-09d1c666.2100bfb0.js.map