(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20ad2927"],{"1b8b":function(e,t,a){"use strict";a("caa7")},"61f3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),a("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),a("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1)),a("v-skeleton-loader",e._b({attrs:{type:"list-item-avatar-three-line, divider"}},"v-skeleton-loader",e.attrs,!1))],1)},o=[],r={data:function(){return{attrs:{boilerplate:!0,elevation:0}}}},i=r,n=a("2877"),l=a("6544"),c=a.n(l),u=a("3129"),d=Object(n["a"])(i,s,o,!1,null,null,null);t["a"]=d.exports;c()(d,{VSkeletonLoader:u["a"]})},"6ab7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e.isLoading?a("TweetsLoading"):[e._l(e.followings,(function(t){return a("FollowingCard",{key:t.followingId,attrs:{"initial-follow":t},on:{"after-build-followship":e.afterBuildFollowship}})})),e.message?a("v-card",{staticClass:"message-card mt-0",attrs:{elevation:"0","max-width":"600px"}},[a("v-card-title",[e._v(e._s(this.message))])],1):e._e()]],2)},o=[],r=a("5530"),i=a("1da1"),n=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mt-0",attrs:{elevation:"0",tile:"","max-width":"600px"}},[a("v-container",{staticClass:"d-flex justify-space-between"},[a("router-link",{staticClass:"links",attrs:{to:"/users/"+e.follow.followingId}},[a("v-avatar",{staticClass:"tweet-card-avatar",attrs:{size:"50"}},[a("img",{attrs:{src:e.follow.avatar,alt:e.follow.name}})])],1),a("v-card-text",{staticClass:"py-0"},[a("v-list-item-title",{staticClass:"followship-user-name mb-1"},[e._v(e._s(e.follow.name))]),a("v-list-item-subtitle",{staticClass:"followship-user-account"},[e._v("@"+e._s(e.follow.account))]),a("v-list-item-content",{staticClass:"followship-intro pb-0 pt-1"},[e._v(" "+e._s(e.follow.introduction)+" ")])],1),e.follow.isFollowed&&e.follow.followingId!==e.currentUser.id?a("v-btn",{staticClass:"text-no-wrap rounded-pill px-4",attrs:{elevation:"0",color:"primary",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.unfollow(e.follow.followingId)}}},[e._v("正在跟隨")]):e._e(),e.follow.isFollowed||e.follow.followingId===e.currentUser.id?e._e():a("v-btn",{staticClass:"text-no-wrap rounded-pill px-4",attrs:{outlined:"",color:"primary",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollow(e.follow.followingId)}}},[e._v("跟隨")])],1),a("v-divider")],1)}),l=[],c=a("2f62"),u=a("8845"),d=a("2fa3"),f={name:"FollowingCard",props:{initialFollow:{type:Object,default:function(){}}},data:function(){return{follow:this.initialFollow,isProcessing:!1}},computed:Object(r["a"])({},Object(c["b"])(["currentUser","isAuthenticated"])),methods:{addFollow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isProcessing=!0,a.next=4,u["a"].follow({followingId:e});case 4:if(s=a.sent,o=s.data,"success"===o.status){a.next=8;break}throw new Error(o.message);case 8:d["a"].fire({icon:"success",title:"".concat(o.message)}),t.follow.isFollowed=!0,t.isProcessing=!1,t.$emit("after-build-followship"),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()},unfollow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isProcessing=!0,a.next=4,u["a"].unfollow({followingId:e});case 4:if(s=a.sent,o=s.data,"success"===o.status){a.next=8;break}throw new Error(o.message);case 8:t.follow.isFollowed=!1,t.isProcessing=!1,d["a"].fire({icon:"success",title:"".concat(o.message)}),t.isProcessing=!1,t.$emit("after-build-followship"),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法移除追蹤，請稍後再試"});case 19:case"end":return a.stop()}}),a,null,[[0,15]])})))()}}},w=f,v=a("2877"),p=a("6544"),g=a.n(p),m=a("8212"),b=a("8336"),h=a("b0af"),k=a("99d9"),x=a("a523"),_=a("ce7e"),C=a("5d23"),F=Object(v["a"])(w,n,l,!1,null,null,null),P=F.exports;g()(F,{VAvatar:m["a"],VBtn:b["a"],VCard:h["a"],VCardText:k["c"],VContainer:x["a"],VDivider:_["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"]});var j=a("4cce"),L=a("61f3"),V={name:"Following",data:function(){return{followings:[],isProcessing:!1,message:"",isLoading:!1}},components:{FollowingCard:P,TweetsLoading:L["a"]},methods:{fetchUserFollowings:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,j["a"].users.getUserFollowings(e);case 4:if(s=a.sent,o=s.data,void 0===o.message){a.next=11;break}return t.message=o.message,t.followings=[],t.isLoading=!1,a.abrupt("return");case 11:t.followings=o,t.isLoading=!1,a.next=20;break;case 15:a.prev=15,a.t0=a["catch"](0),t.isLoading=!1,d["a"].fire({icon:"error",title:"無法取得使用者追蹤中的名單，請稍後再試"}),console.log("error",a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,15]])})))()},afterBuildFollowship:function(){this.$store.dispatch("fetchTopUsers")}},created:function(){var e=this.$route.params.id;this.fetchUserFollowings(e)},computed:Object(r["a"])({},Object(c["b"])(["currentUser"])),beforeRouteUpdate:function(e,t,a){this.fetchUserFollowings(e.params.id),a()}},I=V,O=(a("1b8b"),Object(v["a"])(I,s,o,!1,null,"2a06524e",null));t["default"]=O.exports;g()(O,{VCard:h["a"],VCardTitle:k["d"]})},caa7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-20ad2927.fb604c74.js.map